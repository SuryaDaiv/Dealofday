(this.webpackJsonpcotd=this.webpackJsonpcotd||[]).push([[0],{96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var s=a(2),i=a.n(s),n=a(22),r=a(102),c=a(103),o=a(104),l=a(5),h=a(6),u=a(8),d=a(7),p=a(0),j=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).myInput=i.a.createRef(),e.goToStore=function(t){t.preventDefault();var a=e.myInput.current.value;e.props.history.push("/store/".concat(a))},e}return Object(h.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("form",{className:"store-selector",onSubmit:this.goToStore,children:[Object(p.jsx)("h1",{children:"Choose the deal you want to see"}),Object(p.jsx)("label",{children:Object(p.jsxs)("select",{required:!0,ref:this.myInput,children:[Object(p.jsx)("option",{value:"",selected:!0}),Object(p.jsx)("option",{value:"Fish market",children:"Fish market"}),Object(p.jsx)("option",{value:"Electronics market",children:"Electronics market"})]})}),Object(p.jsx)("button",{type:"submit",children:"Visit Store \u2192"})]})}}]),a}(i.a.Component),m=a(11),b=function(e){return Object(p.jsxs)("header",{className:"top",children:[Object(p.jsxs)("h1",{children:["Deal",Object(p.jsxs)("span",{className:"ofThe",children:[Object(p.jsx)("span",{className:"of",children:"Of"}),Object(p.jsx)("span",{className:"the",children:"The"})]}),"Day"]}),Object(p.jsx)("h3",{className:"tagline",children:Object(p.jsx)("span",{children:e.tagline})})]})},f=a(15),O=a.n(f),v=a(20),g=a(23),x=a(17),y=a.n(x),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).nameRef=i.a.createRef(),e.priceRef=i.a.createRef(),e.statusRef=i.a.createRef(),e.descRef=i.a.createRef(),e.imageRef=i.a.createRef(),e.createFish=function(t){t.preventDefault();var a={name:e.nameRef.current.value,price:parseFloat(e.priceRef.current.value),status:e.statusRef.current.value,desc:e.descRef.current.value,image:e.imageRef.current.value};e.props.addFish(a),t.currentTarget.reset()},e}return Object(h.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("form",{className:"fish-edit",onSubmit:this.createFish,children:[Object(p.jsx)("input",{name:"name",ref:this.nameRef,type:"text",placeholder:"Name"}),Object(p.jsx)("input",{name:"price",ref:this.priceRef,type:"text",placeholder:"Price"}),Object(p.jsxs)("select",{name:"status",ref:this.statusRef,children:[Object(p.jsx)("option",{value:"available",children:"Fresh!"}),Object(p.jsx)("option",{value:"unavailable",children:"Sold Out!"})]}),Object(p.jsx)("textarea",{name:"desc",ref:this.descRef,placeholder:"Desc"}),Object(p.jsx)("input",{name:"image",ref:this.imageRef,type:"text",placeholder:"Image"}),Object(p.jsx)("button",{type:"submit",children:"+ Add Fish"})]})}}]),a}(i.a.Component),k=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).handleChange=function(t){console.log(t.currentTarget.value);var a=Object(m.a)(Object(m.a)({},e.props.fish),{},{[t.currentTarget.name]:"price"===t.currentTarget.name?parseFloat(t.currentTarget.value):t.currentTarget.value});e.props.updateFish(e.props.index,a)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"fish-edit",children:[Object(p.jsx)("input",{type:"text",name:"name",onChange:this.handleChange,value:this.props.fish.name}),Object(p.jsx)("input",{type:"text",name:"price",onChange:this.handleChange,value:this.props.fish.price}),Object(p.jsxs)("select",{type:"text",name:"status",onChange:this.handleChange,value:this.props.fish.status,children:[Object(p.jsx)("option",{value:"available",children:"Fresh!"}),Object(p.jsx)("option",{value:"unavailable",children:"Sold Out!"})]}),Object(p.jsx)("textarea",{name:"desc",onChange:this.handleChange,value:this.props.fish.desc}),Object(p.jsx)("input",{type:"text",name:"image",onChange:this.handleChange,value:this.props.fish.image}),Object(p.jsx)("button",{onClick:function(){return e.props.deleteFish(e.props.index)},children:"Remove Fish"})]})}}]),a}(i.a.Component),w=function(e){return Object(p.jsxs)("nav",{className:"login",children:[Object(p.jsx)("h2",{children:"Profile Login"}),Object(p.jsx)("p",{children:"Sign in to view your Order History and Reviews."}),Object(p.jsx)("button",{className:"github",onClick:function(){return e.authenticate("Github")},children:"Log In With GitHub"}),Object(p.jsx)("button",{className:"facebook",onClick:function(){return e.authenticate("Facebook")},children:"Log In With Facebook"})]})},F=a(41),C=a.n(F),T=y.a.initializeApp({apiKey:"AIzaSyBOJGKxec-NvZRTvoZlQ7mUPxRb4VPKvV8",authDomain:"deal-of-the-day-project.firebaseapp.com",databaseURL:"https://deal-of-the-day-project-default-rtdb.firebaseio.com"}),N=C.a.createClass(T.database()),R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={uid:null,owner:null},e.authHandler=function(){var t=Object(v.a)(O.a.mark((function t(a){var s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.fetch(e.props.storeId,{context:Object(g.a)(e)});case 2:if(s=t.sent,console.log(s),s.owner){t.next=7;break}return t.next=7,N.post("".concat(e.props.storeId,"/owner"),{data:a.user.uid});case 7:e.setState({uid:a.user.uid,name:a.user.displayName,owner:s.owner||a.user.uid});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.authenticate=function(t){var a=new(y.a.auth["".concat(t,"AuthProvider")]);T.auth().signInWithPopup(a).then(e.authHandler)},e.logout=Object(v.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Logging out!"),t.next=3,y.a.auth().signOut();case 3:e.setState({uid:null});case 4:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.a.auth().onAuthStateChanged((function(t){t&&e.authHandler({user:t})}))}},{key:"render",value:function(){var e=this,t=Object(p.jsx)("button",{onClick:this.logout,children:"Log Out!"});return this.state.uid?this.state.uid!==this.state.owner?Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Profile Section"}),Object(p.jsxs)("h2",{children:["Welcome ( \u0361\u275b\u202f\u035c\u0296 \u0361\u275b ) \ud83d\ude4f, ",this.state.name,", The Profile section is under \ud83d\udc77\u200d\u2640\ufe0f \ud83d\udea7"]}),Object(p.jsx)("p",{children:"Once completed you will find your order history, and reviews"}),t]}):Object(p.jsxs)("div",{className:"inventory",children:[Object(p.jsx)("h2",{children:"Inventory"}),t,Object.keys(this.props.fishes).map((function(t){return Object(p.jsx)(k,{index:t,fish:e.props.fishes[t],updateFish:e.props.updateFish,deleteFish:e.props.deleteFish},t)})),Object(p.jsx)(S,{addFish:this.props.addFish}),Object(p.jsx)("button",{onClick:this.props.loadSampleFishes,children:"Load Sample Data"})]}):Object(p.jsx)(w,{authenticate:this.authenticate})}}]),a}(i.a.Component),I={fish1:{name:"Pacific Halibut",image:"/images/hali.jpg",desc:"Everyone\u2019s favorite white fish. We will cut it to the size you need and ship it.",price:1724,status:"available"},fish2:{name:"Lobster",image:"/images/lobster.jpg",desc:"These tender, mouth-watering beauties are a fantastic hit at any dinner party.",price:3200,status:"available"},fish3:{name:"Sea Scallops",image:"/images/scallops.jpg",desc:"Big, sweet and tender. True dry-pack scallops from the icey waters of Alaska. About 8-10 per pound",price:1684,status:"unavailable"},fish4:{name:"Mahi Mahi",image:"/images/mahi.jpg",desc:"Lean flesh with a mild, sweet flavor profile, moderately firm texture and large, moist flakes. ",price:1129,status:"available"},fish5:{name:"King Crab",image:"/images/crab.jpg",desc:"Crack these open and enjoy them plain or with one of our cocktail sauces",price:4234,status:"available"},fish6:{name:"Atlantic Salmon",image:"/images/salmon.jpg",desc:"This flaky, oily salmon is truly the king of the sea. Bake it, grill it, broil it...as good as it gets!",price:1453,status:"available"},fish7:{name:"Oysters",image:"/images/oysters.jpg",desc:"A soft plump oyster with a sweet salty flavor and a clean finish.",price:2543,status:"available"},fish8:{name:"Mussels",image:"/images/mussels.jpg",desc:"The best mussels from the Pacific Northwest with a full-flavored and complex taste.",price:425,status:"available"},fish9:{name:"Jumbo Prawns",image:"/images/prawns.jpg",desc:"With 21-25 two bite prawns in each pound, these sweet morsels are perfect for shish-kabobs.",price:2250,status:"available"}},P={device1:{name:"Ipad",image:"/images/ipad.jfif",desc:"An iPad is a tablet PC designed by Apple Inc. The iPad features a 9.7-inch touch screen.",price:1724,status:"available"},device2:{name:"Iphone",image:"/images/iphone.jfif",desc:"The iPhone has a sleek, minimalist design, and differs from other smartphones in its lack of buttons.",price:3200,status:"available"},device3:{name:"Apple TV",image:"/images/apple tv.jpg",desc:"It is a small network appliance and entertainment device that can receive digital data for visual and audio content such as music, video, video games.",price:1684,status:"unavailable"},device4:{name:"Airpods",image:"/images/airpods.jfif",desc:"Driven by the custom Apple W1 chip, AirPods use optical sensors and a motion accelerometer to detect when they're in your ears.",price:1129,status:"available"},device5:{name:"Homepod",image:"/images/Homepod.jfif",desc:"HomePod is a breakthrough speaker with high\u2011fidelity audio that adapts to its location.",price:4234,status:"available"},device6:{name:"Macbook",image:"/images/Macbook.jpg",desc:"Apple MacBook Pro is a macOS laptop with a 13.30-inch display that has a resolution of 2560x1600 pixels!",price:1453,status:"available"},device7:{name:"Google Clips",image:"/images/google-clips.jpg",desc:"Google Clips is a discontinued miniature clip-on camera device developed by Google.",price:2543,status:"available"},device8:{name:"Pixelbuds",image:"/images/pixelbuds.jfif",desc:"Google Pixel Buds are truly wireless earbuds that are specially designed for a comfortable, customizable fit.",price:425,status:"available"},device9:{name:"Pixelslate",image:"/images/Pixelslate.jfif",desc:"The Pixel Slate is Google's latest entry into the booming category of tablet-laptop hybrids.",price:2250,status:"available"}};function A(e){return(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"})}var D=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props.details,a=t.image,s=t.name,i=t.price,n=t.desc,r="available"===t.status;return Object(p.jsxs)("li",{className:"menu-fish",children:[Object(p.jsx)("img",{src:a,alt:s}),Object(p.jsxs)("h3",{className:"fish-name",children:[s,Object(p.jsx)("span",{className:"price",children:A(i)})]}),Object(p.jsx)("p",{children:n}),Object(p.jsx)("button",{disabled:!r,onClick:function(){return e.props.addToOrder(e.props.index)},children:r?"Add To Order":"Sold Out!"})]})}}]),a}(i.a.Component),G=a(16),E=a(42),M=a(45),J=a(43),W=a.n(J),H={iconStyle:"solid",style:{base:{iconColor:"#c4f0f0",color:"#10CF19",fontWeight:500,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"16px",fontSmoothing:"antialiased",fontColor:"#ffffff",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"#87bbfd"}},invalid:{iconColor:"#ffc7ee",color:"#FF334C"}}};function L(e){var t=Object(s.useState)(!1),a=Object(M.a)(t,2),i=a[0],n=a[1],r=Object(G.useStripe)(),c=Object(G.useElements)(),o=function(){var t=Object(v.a)(O.a.mark((function t(a){var s,i,o,l;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,r.createPaymentMethod({type:"card",card:c.getElement(G.CardElement)});case 3:if(s=t.sent,i=s.error,o=s.paymentMethod,i){t.next=20;break}return t.prev=7,l=o.id,t.next=11,W.a.post("https://backendpay.herokuapp.com/payment",{amount:e.total,id:l});case 11:t.sent.data.success&&(console.log("Successful payment"),n(!0)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),console.log("Error",t.t0);case 18:t.next=21;break;case 20:console.log(i.message);case 21:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:i||0==e.total?Object(p.jsxs)("div",{children:[Object(p.jsxs)("h4",{style:{textAlign:"center"},children:["Payment for ",A(e.total)," has been Successfully Completed"]}),Object(p.jsx)("iframe",{src:"https://giphy.com/embed/qms15Fp6yItUDYRSj9",width:"250",frameBorder:"0",class:"giphy-embed",allowFullScreen:!0})]}):Object(p.jsxs)("form",{onSubmit:o,children:[Object(p.jsx)("fieldset",{className:"FormGroup",children:Object(p.jsx)("div",{className:"FormRow",children:Object(p.jsx)(G.CardElement,{options:H})})}),Object(p.jsx)("button",{children:"Pay"})]})})}var B=a(18),U=Object(E.a)("pk_test_51IJXWkJxMDhneAhqBlfJJQYKTmpR4hHCl9RYmy6ZCWKYTe17oebgVavR5SGSmI5scsyZO74XUZ2MuqpGS5Xv6VbN00J81GAzEs"),V=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).renderOrder=function(e){var t=s.props.fishes[e],a=s.props.order[e],i=t&&"available"===t.status;console.log(t);var n={classNames:"order",key:e,timeout:{enter:500,exit:500}};return t?i?Object(p.jsx)(B.CSSTransition,Object(m.a)(Object(m.a)({},n),{},{children:Object(p.jsx)("li",{children:Object(p.jsxs)("span",{children:[Object(p.jsx)(B.TransitionGroup,{component:"span",className:"count",children:Object(p.jsx)(B.CSSTransition,{classNames:"count",timeout:{enter:500,exit:500},children:Object(p.jsx)("span",{children:a})},a)}),"lbs ",t.name," \u2003 ",A(a*t.price),Object(p.jsx)("button",{onClick:function(){return s.props.removeFromOrder(e)},children:"\xd7"})]})},e)})):Object(p.jsx)(B.CSSTransition,Object(m.a)(Object(m.a)({},n),{},{children:Object(p.jsxs)("li",{children:["Sorry ",t?t.name:"fish"," is no longer available"]},e)})):null},s.state={showItem:!1},s}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.order),a=t.reduce((function(t,a){var s=e.props.fishes[a],i=e.props.order[a];return s&&"available"===s.status?t+i*s.price:t}),0);return Object(p.jsxs)("div",{className:"order-wrap",children:[Object(p.jsx)("h2",{children:"Order"}),this.state.showItem?Object(p.jsx)(G.Elements,{stripe:U,children:Object(p.jsx)(L,{total:a})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(B.TransitionGroup,{component:"ul",className:"order",children:t.map(this.renderOrder)}),Object(p.jsxs)("div",{className:"total",children:["Total:",Object(p.jsx)("strong",{children:A(a)})]}),Object(p.jsx)("button",{onClick:function(){return e.setState({showItem:!0})},children:"Go for Payments"})]})]})}}]),a}(i.a.Component),q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).saveScroll=function(e){},e}return Object(h.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("form",{className:"store-selector",onSubmit:this.saveScroll,children:[Object(p.jsx)("h1",{children:"Choose the deal you want to see"}),Object(p.jsx)("label",{children:Object(p.jsxs)("select",{required:!0,onChange:this.props.goToStore,children:[Object(p.jsx)("option",{value:"",selected:!0}),Object(p.jsx)("option",{value:"Fish market",children:"Fish market"}),Object(p.jsx)("option",{value:"Electronics market",children:"Electronics market"})]})}),Object(p.jsx)("button",{type:"submit",children:"Visit Store \u2192"})]})}}]),a}(i.a.Component),z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={fishes:{},order:{},value:""},e.myInput=i.a.createRef(),e.goToStore=function(t){t.preventDefault(),e.props.history.push("/store/".concat(t.target.value))},e.addFish=function(t){var a=Object(m.a)({},e.state.fishes);a["fish".concat(Date.now())]=t,e.setState({fishes:a})},e.updateFish=function(t,a){var s=Object(m.a)({},e.state.fishes);s[t]=a,e.setState({fishes:s})},e.deleteFish=function(t){var a=Object(m.a)({},e.state.fishes);a[t]=null,e.setState({fishes:a})},e.loadSampleFishes=function(){"/store/Fish%20market"==window.location.pathname?e.setState({fishes:I}):"/store/Electronics%20market"==window.location.pathname&&e.setState({fishes:P})},e.addToOrder=function(t){var a=Object(m.a)({},e.state.order);a[t]=a[t]+1||1,e.setState({order:a})},e.removeFromOrder=function(t){var a=Object(m.a)({},e.state.order);delete a[t],e.setState({order:a})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=localStorage.getItem(e.storeId);t&&this.setState({order:JSON.parse(t)}),this.ref=N.syncState("".concat(e.storeId,"/fishes"),{context:this,state:"fishes"})}},{key:"componentDidUpdate",value:function(){localStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order))}},{key:"componentWillUnmount",value:function(){N.removeBinding(this.ref)}},{key:"render",value:function(){var e=this,t=this.state.value;return Object(p.jsxs)("div",{children:[Object(p.jsx)(q,{goToStore:this.goToStore,ref:this.myInput,value:t}),Object(p.jsxs)("div",{className:"catch-of-the-day",children:[Object(p.jsxs)("div",{className:"menu",children:[Object(p.jsx)(b,{tagline:"Divya's Best Sourced Ecommerce"}),Object(p.jsx)("ul",{className:"fishes",children:Object.keys(this.state.fishes).map((function(t){return Object(p.jsx)(D,{index:t,details:e.state.fishes[t],addToOrder:e.addToOrder},t)}))})]}),Object(p.jsx)(V,{fishes:this.state.fishes,order:this.state.order,removeFromOrder:this.removeFromOrder}),Object(p.jsx)(R,{addFish:this.addFish,updateFish:this.updateFish,deleteFish:this.deleteFish,loadSampleFishes:this.loadSampleFishes,fishes:this.state.fishes,storeId:this.props.match.params.storeId})]})]})}}]),a}(i.a.Component),K=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:"Not Found!?!!!!1111"})})},Z=function(){return Object(p.jsx)(r.a,{children:Object(p.jsxs)(c.a,{children:[Object(p.jsx)(o.a,{exact:!0,path:"/",component:j}),Object(p.jsx)(o.a,{path:"/store/:storeId",component:z}),Object(p.jsx)(o.a,{component:K})]})})};a(96);Object(n.render)(Object(p.jsx)(Z,{}),document.querySelector("#main"))}},[[97,1,2]]]);
//# sourceMappingURL=main.e856ee9e.chunk.js.map